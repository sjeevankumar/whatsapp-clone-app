{"version":3,"sources":["firebase.js","SidebarChat.js","StateProvider.js","Sidebar.js","Chat.js","reducer.js","Login.js","App.js","index.js"],"names":["db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","provider","GoogleAuthProvider","SidebarChat","id","name","addNewChat","useState","seed","setSeed","messages","setMessages","useEffect","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","Math","floor","random","className","onClick","roomName","prompt","add","to","Avatar","src","message","StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","Sidebar","rooms","setRooms","user","unsubscribe","photoURL","IconButton","SearchOutlined","type","placeholder","room","Chat","roomId","useParams","input","setInput","setRoomName","Date","length","timestamp","toDate","toUTCString","AttachFile","displayName","InsertEmoticon","onChange","e","target","preventDefault","console","log","FieldValue","serverTimestamp","actionTypes","state","action","Login","dispatch","alt","Button","signInWithPopup","then","result","catch","error","alert","App","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3ade518a.chunk.js","sourcesContent":["import firebase from \"firebase\";\r\n// import firebase from \"firebase/app\";\r\n// import \"firebase/analytics\";\r\n// import \"firebase/auth\";\r\n// import \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyB4YaRwI13VJfLICNQaMuLhfwi2tbREeII\",\r\n  authDomain: \"whats-app-clone-86435.firebaseapp.com\",\r\n  projectId: \"whats-app-clone-86435\",\r\n  storageBucket: \"whats-app-clone-86435.appspot.com\",\r\n  messagingSenderId: \"962483221887\",\r\n  appId: \"1:962483221887:web:55ec6d294508545ca1964a\",\r\n  measurementId: \"G-DJEYD5JLK8\"\r\n};\r\n\r\nconst firebaseApp=firebase.initializeApp(firebaseConfig);\r\nconst db=firebaseApp.firestore();\r\nconst auth=firebase.auth();\r\nconst provider=new firebase.auth.GoogleAuthProvider();\r\n\r\nexport {auth,provider};\r\nexport default db;","import React, { useEffect } from 'react';\r\nimport { Avatar } from '@material-ui/core';\r\n\r\nimport './SidebarChat.css';\r\nimport { useState } from 'react';\r\nimport db from \"./firebase\";\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\nfunction SidebarChat({ id, name, addNewChat }) {\r\n\r\n      const [seed, setSeed] = useState('');\r\n      const [messages, setMessages] = useState('')\r\n\r\n      useEffect(()=>{\r\n            if(id){\r\n                  db.collection('rooms').doc(id).collection('messages').orderBy('timestamp','desc').onSnapshot(snapshot=>(\r\n                        setMessages(snapshot.docs.map((doc)=>doc.data()))\r\n                  ))\r\n            }\r\n      },[])\r\n\r\n      useEffect(() => {\r\n            setSeed(Math.floor(Math.random() * 5000))\r\n      }, [id]);\r\n\r\n      const createChat = () => {\r\n            const roomName = prompt('Please enter name for chat');\r\n\r\n            if (roomName) {\r\n                  // do some clever database stuff...\r\n                  db.collection('rooms').add({\r\n                        name: roomName,\r\n                  })\r\n            }\r\n      }\r\n\r\n      return !addNewChat ? (\r\n            <Link to={`/rooms/${id}`}>\r\n                  <div className='sidebarChat'>\r\n                        <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`} />\r\n                        <div className=\"sidebarChat_info\">\r\n                              <h2>{name}</h2>\r\n                              <p>{messages[0]?.message}</p>\r\n                        </div>\r\n                  </div>\r\n            </Link>\r\n\r\n      ) : (\r\n            <div className=\"sidebarChat\" onClick={createChat}>\r\n                  <h2>Add new Chat</h2>\r\n            </div>\r\n      )\r\n}\r\n\r\nexport default SidebarChat\r\n","import React, { createContext,useReducer,useContext,StaticContext } from \"react\";\r\n\r\nexport const StateContext=createContext();\r\n\r\nexport const StateProvider=({reducer,initialState,children})=>(\r\n      <StateContext.Provider value={useReducer(reducer,initialState)}>\r\n            {children}\r\n      </StateContext.Provider>\r\n)\r\n\r\nexport const useStateValue=()=>useContext(StateContext);","import React, { useEffect, useState } from 'react';\r\nimport { Avatar, IconButton } from '@material-ui/core';\r\nimport DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport './Sidebar.css';\r\nimport { SearchOutlined } from '@material-ui/icons';\r\nimport SidebarChat from \"./SidebarChat\";\r\nimport db from \"./firebase\";\r\nimport { useStateValue } from './StateProvider';\r\n\r\n\r\nfunction Sidebar() {\r\n\r\n      const [rooms,setRooms]=useState([]);\r\n      const [{user},dispatch]=useStateValue();\r\n\r\n\r\n      useEffect(()=>{\r\n            const unsubscribe=db.collection('rooms').onSnapshot((snapshot)=>\r\n            setRooms(\r\n                  snapshot.docs.map((doc)=>({\r\n                        id:doc.id,\r\n                        data:doc.data(),\r\n                  }))\r\n            ));\r\n            return ()=>{\r\n                  unsubscribe();\r\n            }\r\n\r\n      },[]);\r\n\r\n      return (\r\n            <>\r\n                  <div className=\"sidebar\">\r\n                        <div className=\"sidebar_header\">\r\n                              <Avatar src={user?.photoURL}/>\r\n                              <div className=\"sidebar_headerRight\">\r\n                                    <IconButton>\r\n                                          <DonutLargeIcon />\r\n                                    </IconButton>\r\n\r\n                                    <IconButton>\r\n                                          <ChatIcon />\r\n                                    </IconButton>\r\n\r\n                                    <IconButton>\r\n                                          <MoreVertIcon />\r\n                                    </IconButton>\r\n                              </div>\r\n                        </div>\r\n\r\n                        <div className=\"sidebar_search\">\r\n                              <div className=\"sidebar_searchContainer\">\r\n                                    <SearchOutlined />\r\n                                    <input type=\"text\" placeholder='Search or start new chat' />\r\n                              </div>\r\n\r\n                        </div>\r\n\r\n                        <div className=\"sidebar_chats\">\r\n                              <SidebarChat addNewChat/>\r\n                              {rooms.map((room)=>(\r\n                                    <SidebarChat key={room.id} id={room.id} name={room.data.name} />\r\n                              ))}\r\n                        </div>\r\n                  </div>\r\n            </>\r\n      )\r\n}\r\n\r\nexport default Sidebar\r\n","import React, { useState } from 'react';\r\nimport { Avatar, IconButton } from '@material-ui/core';\r\n\r\nimport './Chat.css'\r\nimport { useEffect } from 'react';\r\nimport { AttachFile, InsertEmoticon, SearchOutlined } from '@material-ui/icons';\r\nimport MoreVert from '@material-ui/icons/MoreVert';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\r\nimport { useParams } from \"react-router-dom\";\r\nimport db from \"./firebase\";\r\nimport { useStateValue } from './StateProvider';\r\nimport firebase from \"firebase\";\r\n\r\n\r\n\r\n\r\nfunction Chat() {\r\n      const [seed, setSeed] = useState('');\r\n      const { roomId } = useParams();\r\n      const [input, setInput] = useState('');\r\n      const [roomName, setRoomName] = useState('');\r\n      const [messages, setMessages] = useState([]);\r\n      const [{user},dispatch]=useStateValue();\r\n\r\n\r\n      useEffect(() => {\r\n            if (roomId) {\r\n                  db.collection('rooms').doc(roomId).onSnapshot(snapshot => {\r\n                        setRoomName(snapshot.data().name);\r\n\r\n                        db.collection('rooms').doc(roomId).collection('messages').orderBy('timestamp', 'ass').onSnapshot(snapshot => (\r\n                              setMessages(snapshot.docs.map(doc => doc.data()))\r\n                        ))\r\n                  })\r\n            }\r\n      }, [roomId])\r\n\r\n      useEffect(() => {\r\n            setSeed(Math.floor(Math.random() * 5000))\r\n      }, []);\r\n\r\n      const sendMessage = (e) => {\r\n            e.preventDefault();\r\n            console.log('You typed >>>', input);\r\n\r\n            db.collection('rooms').doc(roomId).collection('messages').add({\r\n                  message:input,\r\n                  name:user.displayName,\r\n                  timestamp:firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n\r\n            setInput('');\r\n      }\r\n\r\n      return (\r\n            <div className='chat'>\r\n                  <div className=\"chat_header\">\r\n                        <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`} />\r\n\r\n                        <div className=\"chat_headerInfo\">\r\n                              <h3>{roomName}</h3>\r\n                              <p>Last seen{\"\"}\r\n                                    {new Date(\r\n                                          messages[messages.length-1]?.\r\n                                          timestamp?.toDate()\r\n                                    ).toUTCString()}\r\n                              </p>\r\n                        </div>\r\n\r\n                        <div className=\"chat_headerRight\">\r\n                              <IconButton>\r\n                                    <SearchOutlined />\r\n                              </IconButton>\r\n\r\n                              <IconButton>\r\n                                    <AttachFile />\r\n                              </IconButton>\r\n\r\n                              <IconButton>\r\n                                    <MoreVert />\r\n                              </IconButton>\r\n                        </div>\r\n                  </div>\r\n\r\n                  <div className=\"chat_body\">\r\n                        {messages.map(message => (\r\n                              <p className={`chat_message ${message.name===user.displayName && \"chat_reciever\"} `}>\r\n                                    <span className=\"chat_name\">{message.name}</span>\r\n                                          {message.message}\r\n                                    <span className=\"chat_timestamp\">\r\n                                          {new Date(message.timestamp?.toDate()).toUTCString()}\r\n                                    </span> </p>\r\n                        ))}\r\n\r\n\r\n                  </div>\r\n\r\n                  <div className=\"chat_footer\">\r\n                        <InsertEmoticon />\r\n                        <form>\r\n                              <input type=\"text\" placeholder='Type a message' value={input} onChange={(e) => setInput(e.target.value)} />\r\n                              <button type='submit' onClick={sendMessage}>Send a message</button>\r\n                        </form>\r\n                        <MicIcon />\r\n                  </div>\r\n\r\n            </div>\r\n      )\r\n}\r\n\r\nexport default Chat;\r\n","export const initialState={user:null,};\r\n\r\nexport const actionTypes={SET_USER:\"SET_USER\",}\r\n\r\nconst reducer=(state,action)=>{\r\n      console.log(action);\r\n      switch(action.type){\r\n            case actionTypes.SET_USER:\r\n                  return {\r\n                        ...state,\r\n                        user:action.user,\r\n                  };\r\n                  default:\r\n                        return state;\r\n      }\r\n};\r\nexport default reducer;","import React from 'react';\r\nimport './Login.css';\r\nimport { Button } from '@material-ui/core';\r\nimport {auth,provider} from \"./firebase\";\r\nimport { useStateValue } from './StateProvider';\r\nimport { actionTypes } from './reducer';\r\n\r\n\r\n\r\nfunction Login() {\r\n      const [{user},dispatch]=useStateValue();\r\n      const signIn=()=>{\r\n            auth.signInWithPopup(provider).then((result)=>{\r\n                  dispatch({\r\n                        type:actionTypes.SET_USER,\r\n                        user:result.user,\r\n                  })\r\n            }).catch((error)=>alert(error.message));\r\n      }\r\n      return (\r\n            <div className='login'>\r\n                  <div className=\"login_container\">\r\n                        <img src=\"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg\" alt=\"\" />\r\n\r\n                        <div className=\"login_text\">\r\n                              <h1>Sign in to Whatsapp</h1>\r\n                        </div>\r\n\r\n                        <Button type='submit' onClick={signIn}>\r\n                              Sign in with Google\r\n                        </Button>\r\n                  </div>\r\n            </div>\r\n      )\r\n}\r\n\r\nexport default Login\r\n","import React,{useState} from 'react';\r\nimport './App.css';\r\nimport Sidebar from \"./Sidebar\";\r\nimport Chat from \"./Chat\";\r\nimport Login from \"./Login\";\r\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\r\nimport { useStateValue } from './StateProvider';\r\n\r\n\r\nfunction App() {\r\n      const [{user},dispatch]=useStateValue();\r\n      return (\r\n            <div className='app'>\r\n                  {!user ? (\r\n                        <Login/>\r\n                  ):(\r\n                        <div className=\"app_body\">\r\n                        <Router>\r\n                              <Sidebar />\r\n                              <Switch>\r\n                                    <Route path=\"/rooms/:roomId\">\r\n                                          <Chat />\r\n                                    </Route>\r\n                              </Switch>\r\n                        </Router>\r\n\r\n                  </div>\r\n                  )}\r\n                 \r\n            </div>\r\n      )\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport './index.css'\r\nimport App from \"./App\";\r\nimport reducer,{initialState} from \"./reducer\";\r\nimport {StateProvider} from \"./StateProvider\";\r\n\r\n\r\nReactDOM.render(\r\n      <StateProvider initialState={initialState} reducer={reducer}>\r\n            <App />\r\n      </StateProvider>,\r\n      document.getElementById('root'));"],"sourceRoot":""}